---
title: "分散投資機能完成！投資総額と銘柄数を指定するだけで最適な投資配分を自動計算"
description: "高配当株スクリーナーに分散投資機能を統合。投資総額と銘柄数を入力するだけで、投資スコアに基づいた最適な投資配分を自動計算し、業界分散状況も可視化します。"
pubDate: 2025-10-16
heroImage: "/background.svg"
category: "機能追加"
tags: ["分散投資", "投資配分", "高配当株", "スクリーニング", "業界分散"]
---

# 分散投資機能完成！投資総額と銘柄数を指定するだけで最適な投資配分を自動計算

高配当株スクリーナーに**分散投資機能**を統合しました！これで、投資総額と銘柄数を指定するだけで、投資スコアに基づいた最適な投資配分を自動計算できるようになりました。

## 🎯 新機能の概要

### 分散投資計算ツール
- **場所**: HTMLレポート上部の折りたたみ式セクション
- **入力項目**:
  - 投資総額（デフォルト: 10万円）
  - 投資銘柄数（デフォルト: 10銘柄、最大20銘柄）
  - 最低投資スコア（デフォルト: 70点）
  - 配分戦略（等配分、投資スコア加重、配当利回り加重）

### 投資配分の自動計算
1. **銘柄選択**: 投資スコアが最低スコア以上の銘柄を抽出
2. **配分計算**: 選択した戦略に基づいて投資金額を配分
3. **株数計算**: 1株単位での効率的な購入株数を計算
4. **余剰金再配分**: 余った資金を株価の安い順に1株ずつ追加購入

## 📊 表示される情報

### メインテーブルへの追加列
- **購入株数**: 各銘柄の購入株数
- **投資金額**: 各銘柄への実際の投資金額  
- **年間配当収入**: 各銘柄からの年間配当収入

### ポートフォリオ配分結果
- 投資総額 vs 実際投資額
- 未投資額
- 年間配当収入
- ポートフォリオ利回り（%）

### 購入銘柄一覧表
- **銘柄コード**: 4桁の銘柄コード
- **銘柄名（セクター）**: 銘柄名と業界名を階層表示
- **購入株数**: 購入する株数
- **投資金額**: 実際の投資金額
- **年間配当**: 年間配当収入

### 業界分散状況
- **分散度スコア**: 0-100点（ハーフィンダール指数ベース）
- **業界数**: 投資対象の業界数
- **各業界の詳細**: 投資割合、銘柄数、投資金額、年間配当収入
- **視覚的プログレスバー**: 各業界の投資割合を可視化

## 🌍 業界名の日本語翻訳

英語の業界名を日本語に自動翻訳して表示します：

- Industrial Distribution → 産業流通
- Auto Parts → 自動車部品
- Auto & Truck Dealerships → 自動車販売
- Scientific & Technical Instruments → 科学技術機器
- Engineering & Construction → 建設・土木
- Building Products & Equipment → 建材・設備
- Utilities - Regulated Electric → 電力・ガス
- Staffing & Employment Services → 人材派遣
- Specialty Business Services → 専門サービス
- Information Technology Services → ITサービス
- Chemicals → 化学
- Telecom Services → 通信サービス
- Consulting Services → コンサルティング

## 💡 使用例

### 10万円を10銘柄に分散投資する場合
1. 投資総額: 100,000円
2. 投資銘柄数: 10銘柄
3. 最低投資スコア: 70点
4. 配分戦略: 投資スコア加重

**結果例**:
- 実際投資額: 99,849円（99.8%の効率）
- 未投資額: 151円
- 年間配当収入: 3,733円
- ポートフォリオ利回り: 3.74%
- 分散度スコア: 87.7点（良好）
- 投資業界数: 9業界

## 🔧 技術的特徴

### 1株単位での投資
- **SBI証券S株対応**: 1株単位での購入を前提
- **効率的な配分**: 余剰金を株価の安い順に1株ずつ再配分
- **最小限の未投資**: 投資効率を最大化

### 動的計算
- **リアルタイム計算**: ブラウザ上で即座に計算・表示更新
- **動的列インデックス**: CSV構造変更に対応
- **エラーハンドリング**: NaN値対策、計算エラー時の適切な表示

### ユーザビリティ
- **折りたたみ式UI**: 必要な時だけ展開
- **ボタン連打防止**: 計算中の適切な状態管理
- **レスポンシブ対応**: 小画面での横スクロール対応

## 📈 投資戦略の選択肢

### 1. 等配分
投資総額を選択銘柄数で均等分割。シンプルで分かりやすい配分方法。

### 2. 投資スコア加重（推奨）
各銘柄の投資スコアに比例して配分。高スコア銘柄により多く投資。

### 3. 配当利回り加重
各銘柄の配当利回りに比例して配分。配当収入を重視した配分方法。

## 🎉 今後の展望

この分散投資機能により、投資判断がより科学的で体系的になりました。今後は以下のような拡張も検討しています：

- **追加配分戦略**: リスク調整リターン加重、バリュー投資加重など
- **業界制限**: 特定業界の除外・重点配分機能
- **期間設定**: 投資期間に応じた配分調整
- **リスク指標**: VaR、シャープレシオなどの追加
- **エクスポート機能**: 投資計画のCSV/PDF出力

## 🚀 使い方

1. 高配当株スクリーナーを実行
2. 生成されたHTMLレポートを開く
3. 「💰 分散投資計算ツール」をクリックして展開
4. 投資総額、銘柄数、最低投資スコア、配分戦略を設定
5. 「📊 分散投資を計算」ボタンをクリック
6. 結果を確認して投資計画を立てる

分散投資機能により、より効率的で安全な投資判断が可能になりました。ぜひお試しください！

---

**関連記事**:
- [投資結果一覧](/investment-results) - 高配当株・ネットネット株の分析結果
